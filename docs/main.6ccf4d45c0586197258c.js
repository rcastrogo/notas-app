!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t){e.exports='<div>\r\n  <div class="w3-bar w3-black">\r\n    <button on-click="goBack" class="pol-btn w3-button w3-black"><i class="fa fa fa-chevron-left"></i></button>\r\n    <span on-publish="msg\\page_component\\update\\title:innerHTML">Imagen</span>\r\n  </div>   \r\n</div>\r\n'},function(e,t){e.exports='<div class="w3-animate-left img-container" on-click="notify">\r\n</div>'},function(e,t){e.exports='<div class="w3-animate-left page-container">\r\n</div>'},function(e,t){e.exports='<div class="w3-animate-left page-container">\r\n</div>'},function(e,t){e.exports='<div class="w3-animate-left page-container">\r\n</div>'},function(e,t){e.exports='<div class = "w3-padding w3-teal w3-round"\r\n     style = "position:absolute;width:{dimension.width};left:{dimension.left};top:{dimension.top}">\r\n  <div class="w3-center w3-small w3-round" style="overflow:hidden">{hora|paddingLeft,00}:00</div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="w3-card-4 w3-margin w3-padding w3-round">\r\n  <div>{0|paddingLeft,00}:00</div>\r\n</div>'},function(e,t){e.exports='<div class= "w3-padding">\r\n\r\n  <h2 xbind="">Últimas {this.length} actividades</h2>\r\n\r\n\t<div class= "w3-card-4 w3-padding w3-margin-bottom" xfor="activity in this" xbind="">\r\n\t\t<h3 xbind="">{activity.name}</h3>\r\n\t\t{activity.distance} km {activity.total_elevation_gain} metros\r\n\t<div>\r\n\r\n</div>\r\n'},function(e,t,n){"use strict";n.r(t);let o={};!function(e,t){var n=e.Pol={apply:function e(t,n,o){if(o&&e(t,o),t&&n&&"object"==typeof n)for(var i in n)"object"==typeof n[i]?e(t[i],n[i]):t[i]=n[i];return t}};!function(e){e.apply(e,{toArray:function(e){return Array.prototype.slice.call(e)},isNull:function(e){return null===e},isArray:function(e){return Array.isArray(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isNumber:function(e){return"number"==typeof e},isFunction:function(e){return"function"==typeof e},isObject:function(e){return e&&"object"==typeof e},clone:function(t){return e.isArray(t)?t.slice(0):e.isObject(t)&&t.clone?t.clone():e.isObject(t)?Object.keys(t).reduce((function(n,o){return n[o]=e.clone(t[o]),n}),{}):t},join:function(e,t,n){return e.reduce((function(e,n){return e.append(n[t||"id"])}),[]).join(void 0===n?"-":n||"")},stringBuilder:function(e){return{value:e||"",append:function(e){return this.value=this.value+e,this},appendLine:function(e){return this.value=this.value+(e||"")+"\n",this}}},build:function(t,o,i){let r=e.isString(o)?{innerHTML:o}:o,a=n.apply(document.createElement(t),r);return i?a.firstElementChild:a},$:function(t,n){return"string"==typeof t?document.getElementById(t)||e.toArray((n||document).querySelectorAll(t)||[]):t},parseQueryString:function(){return location.search.slice(1).split("&").reduce((e,t)=>(e[t.split("=")[0]]=t.split("=")[1]||"",e),{})}})}(n),function(e){e.apply(String,{stringBuilder:e.stringBuilder,leftPad:function(e,t,n){var o=""+e;for(null!=n&&""!==n||(n=" ");o.length<t;)o=n+o;return o},trimValues:function(e){return e.map((function(e){return e.trim()}))}}),e.apply(String.prototype,{replaceAll:function(e,t){return this.split(e).join(t)},repeat:String.prototype.repeat||function(e){return new Array(e+1).join(this)},contains:String.prototype.includes||function(e,t){return this.indexOf(e)>=(t||0)},startsWith:String.prototype.startsWith||function(e){return 0==this.indexOf(e)},toFloat:function(){return this.trim().replaceAll(".","").replaceAll(",",".")},fixDate:function(e){return this.split(e||" ")[0]},fixTime:function(e){return this.split(e||" ")[1]},fixYear:function(){return this.fixDate().split("/")[2]},trimSeconds:function(){return this.split(":")[0]+":"+this.split(":")[1]},paddingLeft:function(e){return(e+this).slice(-e.length)},format:function(){var t=arguments,n=t[t.length-1]||self,o=function(t,o,i){var r=String.trimValues(o).reduce((function(t,o){return t.push("@"==o.charAt(0)?e.templates.getValue(o.slice(1),n):o),t}),i);return t.apply(n,r)};return this.replace(/\{(\d+|[^{]+)\}/g,(function(i,r){let a,[s,l]=String.trimValues(r.split(":"));if(/^\d+/.test(s)){let o=String.trimValues(s.split("|")),i=o[0],r=0==o.length?"data":["data"].concat(o.slice(1)).join("|"),l={data:t[i],outerScope:n};a=e.templates.getValue(r,l)}else a=e.templates.getValue(s,n);if(e.isFunction(a))return o(a,l?l.split(/\s|\;/):[],[]);if(l){let[t,i]=String.trimValues(l.split(/=>/));return i=i?i.split(/\s|\;/):[],o(e.templates.getValue(t,n),i,[a])}return a}))},htmlDecode:function(){return(new DOMParser).parseFromString(this,"text/html").documentElement.textContent}})}(n),function(e){e.apply(Date.prototype,{format:function(){return"{0|paddingLeft,00}/{1|paddingLeft,00}/{2|paddingLeft,0000}".format(this.getDate().toString(),(this.getMonth()+1).toString(),this.getFullYear().toString())}})}(n),function(e){e.apply(Array.prototype,{remove:function(e){var t=this.indexOf(e);return-1!=t&&this.splice(t,1),this},add:function(e){return this.push(e),e},append:function(e){return this.push(e),this},item:function(e,t,n){return 1==arguments?this.filter((function(t){return t.id==e||t._id==e}))[0]||n:this.filter((function(n){return n[e]==t}))[0]||n},contains:function(e,t){return this.item(e,t)},lastItem:function(){return this[this.length-1]},select:function(e){return this.map(e)},where:function(t){return e.isFunction(t)?this.filter(t):e.isObject(t)?this.filter(new Function("a",Object.keys(t).reduce((function(n,o,i){return n+(i>0?" && ":"")+((r=t[o])instanceof RegExp?"{1}.test(a.{0})".format(o,r):e.isString(r)?"a.{0} === '{1}'".format(o,r):"a.{0} === {1}".format(o,r));var r}),"return "))):this},sortBy:function(e,t){var n=[],o=e.split(",").map((function(e,t){var o=e.split(" ");return n[t]=o[1]&&"DESC"==o[1].toUpperCase()?-1:1,o[0]}));return n[0]=t?-1:1,this.sort((function(e,t){var i=0,r=function(e,t){var a=e[o[i]],s=t[o[i]];return a<s?-1*n[i]:a>s?1*n[i]:++i<o.length?r(e,t):0};return r(e,t)})),this},orderBy:function(t){var n=t;return e.isString(t)&&(n=function(e){return e[t]}),this.map((function(e){return e})).sort((function(e,t){var o=n(e),i=n(t);return o<i?-1:o>i?1:0}))},distinct:function(t){var n=t;e.isString(t)&&(n=function(e){return e[t]});var o=[];return this.forEach((function(e){var t=n(e);-1==o.indexOf(t)&&o.push(t)})),o},groupBy:function(t){var n=t;return e.isString(t)&&(n=function(e){return e[t]}),this.reduce((function(e,t){var o=n(t);return(e[o]=e[o]||[]).push(t),e}),{})},toDictionary:function(e,t){return this.reduce((function(n,o){return n[o[e]]=t?o[t]:o,n}),{})}})}(n),function(e){var t=[];e.Include=function(n){return new Promise(o=>{function i(){t.push(n.toLowerCase()),o()}if(t.indexOf(n.toLowerCase())>-1)o();else{var r=e.build("script",{type:"text/javascript"});r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,i())}:r.onload=function(){i()},r.src=n,document.getElementsByTagName("head")[0].appendChild(r)}})}}(n),function(e){function t(e,n){return e.split(/\.|\[|\]/).reduce((function(e,n){if(""===n)return e;if("this"===n)return e;let o=n,i=n.indexOf("|")>-1,r=[];if(i){let e=String.trimValues(n.split("|"));o=e[0],r=String.trimValues(e[1].split(","))}let a=e[o];return void 0===a&&e.outerScope&&(a=t(o,e.outerScope)),null!=a?i?a.__proto__[r[0]].apply(a,r.slice(1)):a:e===self?"":self}),n||self)}function o(n,o,i){var r=function(e,n,r){var a=String.trimValues(n).reduce((function(e,n){return e.push("@"==n.charAt(0)?t(n.slice(1),o):n),e}),r);return i&&a.push(i),e.apply(o,a)};return n.replace(/{([^{]+)?}/g,(function(n,i){if(i.indexOf(":")>0){let e=String.trimValues(i.split(":")),n=t(e[0],o),[a,s]=String.trimValues(e[1].split(/=>/)),l=s?String.trimValues(s.split(/\s|\;/)):[];return r(t(a,o),l,[n])}let[a,s]=String.trimValues(i.split(/=>/));var l=t(a,o);return e.isFunction(l)?r(l,s.split(/\s|\;/),[]):l}))}function i(r,a){var s=e.$(r),l=e.$("[xfor]",s),c=l.reduce((t,n)=>t.concat(e.$("[xbind]",n)),[...l]),d=e.$("[xbind]",s).filter(e=>!c.includes(e));return s.attributes.xbind&&d.push(s),d.forEach((function(n){e.toArray(n.childNodes).where({nodeType:3}).where({textContent:/{[^{]+?}/g}).forEach(e=>{e.textContent=o(e.textContent,a,e)}),String.trimValues(n.attributes.xbind.value.split(";")).forEach((function(o){if(""===o)return;let[i,r]=String.trimValues(o.split(":")),[s,l]=String.trimValues(r.split(/=>/));var c=t(s,a);if(e.isFunction(c)){var d=String.trimValues(l.split(/\s|#/)).reduce((function(e,n){return e.push("@"==n.charAt(0)?t(n.slice(1),a):n),e}),[]);d.push(n),c=c.apply(a,d)}n[i]=c}))})),l.map(e=>{let[o,r]=String.trimValues(e.attributes.xfor.value.split(" in ")),s=t(r,a);return s&&s!=window&&s.map((t,r)=>{let s={index:r,outerScope:a};s[o]=n.clone(t);let l=i(e.cloneNode(!0),s);e.parentNode.insertBefore(l,e)}),e}).forEach(e=>e.parentNode.removeChild(e)),r}e.templates={getValue:t,merge:o,execute:function(t,n,o){var r=e.$(t),a=n.reduce((function(e,t,n){var a={index:n,data:t,node:i(r.cloneNode(!0),t)};return e.nodes.push(a),o||e.html.push(a.node.outerHTML.replace(/xbind="[^"]*"/g,"")),e}),{nodes:[],html:[]});return o?a.nodes:a.html.join("")},fill:i}}(n),function(e){e.ajax={},e.apply(e.ajax,{get:function(e,t){return new Promise((n,o)=>{var i=this.createXMLHttpRequest();i.open("GET",e,!0),t&&t(i),i.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),i.setRequestHeader("Cache-Control","no-cache"),i.onreadystatechange=function(){4==i.readyState&&n(i.responseText)},i.onerror=function(e){o(e)},i.send(null)})},post:function(e,t,n){return new Promise((o,i)=>{var r=this.createXMLHttpRequest();r.open("POST",e,!0),n?n(r):r.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset:ISO-8859-1"),r.onreadystatechange=function(){4==r.readyState&&o(r.responseText)},r.send(t)})},callWebMethod:function(e,t,n){var o=this.createXMLHttpRequest();o.open("POST",e,!0),o.onreadystatechange=function(){4==o.readyState&&n(o.responseText)},o.setRequestHeader("Content-type","application/json; charset=utf-8"),o.send(t)},createXMLHttpRequest:function(){return new XMLHttpRequest}})}(n),function(e){var t;e.tabbly={execute:function(e){var n;t={sections:[],groups:[],details:[]};var o="",i="",r=!1;function a(e){return e&&e.trim().startsWith("@")?t[e.trim().split("@")[1].trim()]||"":e?e.trim():""}function s(e){for(var t=/([a-zA-Z0-9_\-]*)\s*:\s*('[^']*'|[^\s]*)/g,n={},o=t.exec(e);null!=o;)n[o[1].trim()]=a(o[2].trim().replace(/^'([^']*)'$/g,"$1")),o=t.exec(e);return n}return e.split("\n").forEach((function(e){!function(e,t){if(!o&&!e.trim())return function(){};var a;if(!/DEFINE|#|CREATE|SET|FUNCTION|END/.test(e)){if(o)return i+=t,i+="\n",function(){};throw new Error("Tabbly : Unrecognized text")}if(/^#/.test(e))return function(){};if(/^SET (\w.*)/.test(e)){var l=e.match(/^SET (\w.*)$/);return r=!0,o=l[1].trim(),i="",function(){}}if(/^FUNCTION (\w.*)/.test(e)){var l=e.match(/^FUNCTION (\w.*)$/);return r=!1,o=l[1].trim(),i="",function(){}}if(/^END/.test(e)){var c=i,d=o;return o=i="",r?(r=!1,function(e){n[d]=c.trim()}):function(e){e[d]=new Function("ctx",c)}}if(/^DEFINE\s\s*(\w.*)\s*=\s*(.*)$/.test(e)){l=e.match(/^DEFINE\s\s*([a-zA-Z0-9_\-]*)\s*=\s*(.*)$/);return a=l,function(e){e[a[1].trim()]=a[2].trim()}}if(!/^CREATE\s\s*(\w*) (.*)$/.test(e))throw new Error("Tabbly : Unrecognized text after DEFINE");return"section"==(l=e.match(/^CREATE\s\s*(\w*) (.*)$/))[1]?function(){var e=l;return function(t){t.sections.push(s(e[2])),n=t.sections[t.sections.length-1]}}():"group"==l[1]?function(){var e=l;return function(t){t.groups.push(s(e[2])),n=t.groups[t.groups.length-1]}}():"detail"==l[1]?function(){var e=l;return function(t){t.details.push(s(e[2])),n=t.details[t.details.length-1]}}():void 0}(e.trim(),e)(t)})),{context:t}}}}(n),function(e){e.ReportEngine={},e.ReportEngine.generateReport=function(t,n,o){o.message({type:"report.begin"});var i=t||e.ReportEngine.rd,r=i.context.parseData?i.context.parseData(i,n,o.message):n;o.message({type:"report.log.message",text:"Inicializando..."}),console.time("Render");var a=function(t,n,i){o.send(e.templates.merge(t,n))};function s(){m.forEach((function(e,t){if(!(t<c))return o.message({type:"report.sections.group.header",value:e.id}),e.definition.header?a(e.definition.header,e):e.definition.headerValueProvider?o.send(e.definition.headerValueProvider(e)):void 0}))}function l(e){var t=m.map((function(e){return e}));e&&t.splice(0,e),t.reverse().forEach((function(e){return o.message({type:"report.sections.group.footer",value:e.id}),e.definition.footer?a(e.definition.footer,e):e.definition.footerValueProvider?o.send(e.definition.footerValueProvider(e)):void 0}))}var c=-1,d=function(){var e=JSON.parse(i.context.summary||"{}");return i.context.onInitSummaryObject?i.context.onInitSummaryObject(e):e}(),u=(i.context.sections||[]).where({type:"header"}),p=(i.context.sections||[]).where({type:"total"}),f=((i.context.sections||[]).where({type:"footer"}),i.context.details||[]),m=i.context.groups.map((function(t,n){return{name:"G"+(n+1),rd:i,definition:t,current:"",data:e.clone(d),init:function(t){var n=t[this.definition.key].toString(),o=self.BS[this.name];o.all[n]=o.all[n]||[],o.all[n].push(t),o.recordCount=1,!1!==this.__resume&&(this.__resume?e.ReportEngine.copy(t,this.data):(this.__resume=Object.keys(this.data).length>0)&&e.ReportEngine.copy(t,this.data))},sum:function(t){var n=t[this.definition.key].toString(),o=self.BS[this.name];o.all[n]=o.all[n]||[],o.all[n].push(t),o.recordCount+=1,!1!==this.__resume&&e.ReportEngine.sum(t,this.data)},test:function(e){return e[this.definition.key]==this.current}}}))||[];self.BS={reportDefinition:i,mediator:o},i.context.iteratefn&&(o.message({type:"report.log.message",text:"Inicializando elementos..."}),r.forEach(i.context.iteratefn)),i.context.orderBy&&(o.message({type:"report.log.message",text:"Ordenando datos..."}),r.sortBy(i.context.orderBy,!1)),self.BS={recordCount:0,G0:e.clone(d),dataSet:r,reportDefinition:i,mediator:o},m.forEach((function(e,t){e.current=r&&r[0]?r[0][e.definition.key]:"",self.BS[e.name]={recordCount:0,all:{}}})),i.context.onStartfn&&i.context.onStartfn(self.BS),[i.context.sections,i.context.details,i.context.groups].reduce((function(e,t){return e.concat(t)}),[]).map((function(t){t.valueProviderfn&&(t.valueProvider=e.templates.getValue(t.valueProviderfn,self),delete t.valueProviderfn),t.footerValueProviderfn&&(t.footerValueProvider=e.templates.getValue(t.footerValueProviderfn,self),delete t.footerValueProviderfn),t.headerValueProviderfn&&(t.headerValueProvider=e.templates.getValue(t.headerValueProviderfn,self),delete t.headerValueProviderfn)})),o.message({type:"report.render.rows"}),o.message({type:"report.log.message",text:"Generando informe..."}),u.forEach((function(e){return o.message({type:"report.sections.header",value:e}),e.template?a(e.template,e):e.valueProvider?o.send(e.valueProvider(e)):void 0})),r.length>0&&s(),r.forEach((function(t,n){if(self.BS.recordCount++,self.BS.isLastRow=r.length===self.BS.recordCount,self.BS.isLastRowInGroup=self.BS.isLastRow,self.BS.percent=self.BS.recordCount/r.length*100,self.BS.previous=self.BS.data||t,self.BS.data=t,m.forEach((function(e,t){self.BS[e.name].data=Object.create(e.data)})),e.ReportEngine.sum(t,self.BS.G0),i.context.onRowfn&&i.context.onRowfn(self.BS),o.message({type:"report.render.row",text:self.BS.percent.toFixed(1)+" %",value:self.BS.percent}),m.every((function(e){return e.test(t)}))?m.forEach((function(e){e.sum(t)})):(m.some((function(e,n){return!e.test(t)&&(l(c=n),m.forEach((function(e,o){o>=c?(e.init(t),c=n):e.sum(t)})),!0)})),m.forEach((function(e){e.current=t[e.definition.key]})),i.context.onGroupChangefn&&i.context.onGroupChangefn(self.BS),o.message({type:"report.sections.group.change",value:"__groups"}),s()),m.length&&!self.BS.isLastRow){var d=r[self.BS.recordCount];self.BS.isLastRowInGroup=!m.every((function(e){var t=e.definition.key;return d[t]===self.BS.data[t]}))}f.forEach((function(e){return o.message({type:"report.sections.detail",value:e.id}),e.template?a(e.template,e):e.valueProvider?o.send(e.valueProvider(e)):void 0}))})),r.length>0&&(self.BS.previous=self.BS.data,l()),p.forEach((function(e){return o.message({type:"report.sections.total",value:e.id}),e.template?a(e.template,e):e.valueProvider?o.send(e.valueProvider(e)):void 0})),o.message({type:"report.render.end"}),o.message({type:"report.end"}),o.flush(),console.timeEnd("Render")},e.ReportEngine.copy=function(e,t){Object.keys(t).map((function(n){t[n]=e[n]}))},e.ReportEngine.sum=function(e,t){Object.keys(t).map((function(n){t[n]+=e[n]}))},e.ReportEngine.compute=function(e,t){return e.reduce((function(e,n){return e+n[t]}),0)},e.ReportEngine.group=function(e,t){var n=e,o=function(e,i){return n.distinct((function(t){return t[e]})).forEach((function(o){t[o]=n.reduce((function(t,n,r,a){return n[e]==o?t+n[i]:t}),0)})),o};return o}}(n)}(o);var i=o.Pol;let r={},a=-1;var s={subscribe:function(e,t){r[e]||(r[e]=[]);var n=(++a).toString();return r[e].push({token:n,func:t}),n},publish:function(e,t){return!!r[e]&&(setTimeout((function(){for(var n=r[e],o=n?n.length:0;o--;)n[o].func(e,t)}),0),!0)},unsubscribe:function(e){for(var t in r)if(r[t])for(var n=0,o=r[t].length;n<o;n++)if(r[t][n].token===e)return r[t].splice(n,1),e;return!1},TOPICS:{VIEW_CHANGE:"view:change",VALUE_CHANGE:"value:change",MUNICIPIO_CHANGE:"municipio:change",WINDOW_SCROLL:"window.scroll",NOTIFICATION:"notification.show"}};const l="\n  <h1>{title}</h1>\n";const c="  \n  <p>{text}</p>\n";const d=s.TOPICS;var u=function(e){return{root:{},init:function(){},render:function(){return this.root=i.build("section",{id:"app-content-container",innerHTML:"",className:"w3-container",style:{minHeight:"440px",padding:"0 0 60px 0"}}),this.root},mounted:function(){!function(){function e(){var e=document.getElementById("appMenu");if(!e.className.includes("sticky")){var t=e.offsetTop;window.onscroll=function(){window.pageYOffset>=t?e.classList.add("sticky"):e.classList.remove("sticky"),s.publish(d.WINDOW_SCROLL,window)}}}window.addEventListener("resize",(t=e,n=150,function(){var e=this,r=arguments,a=function(){i=null,o||t.apply(e,r)},s=o&&!i;clearTimeout(i),i=setTimeout(a,n),s&&t.apply(e,r)}),!1),e();var t,n,o,i}()}}};const p=["[on-click]","[on-publish]","[route-link]","[on-change]"];var f={addEventListeners:function(e,t,n){let o={innerHTML:(e,t)=>e.innerHTML=t,className:(e,t)=>e.className=t};p.forEach((r,a)=>{i.toArray(i.$(r,e)).concat([e]).forEach(e=>{let l=r.replace("[","").replace("]","");if(!e.attributes[l])return;let c=e.attributes[l].value,d=c.split(":");if(0!==a){if(1===a){let r=i.templates.getValue(d[0],s);r=r===window?d[0]:r,s.subscribe(r,(r,a)=>{let s=d[1];if(s){let r=o[s]||t[s]||i.templates.getValue(s,n);r&&r.apply(n,[e,a])}else o.innerHTML(e,a)})}if(2===a&&(e.onclick=function(e){let t=n.router,o=t.normalizePath(e.target.href);if(t.current!=o)try{t.navigateTo(o)}catch(e){console.log(e)}return!1}),3===a){let o="SELECT"===e.tagName;if("publish"===c)return void(o?e.onchange=()=>s.publish(s.TOPICS.VALUE_CHANGE,e):e.oninput=()=>s.publish(s.TOPICS.VALUE_CHANGE,e));let r=t[c]||i.templates.getValue(c,n);o?e.onchange=()=>r.apply(n,[e]):e.oninput=()=>r.apply(n,[e])}}else{let o=t[d[0]]||i.templates.getValue(d[0],n);e.onclick=t=>{let r=d.slice(1).reduce((function(e,t){return e.push("@"==t.charAt(0)?i.templates.getValue(t.slice(1),n):t),e}),[e,t]);return o.apply(n,r)}}})})}};const m='  \n  <div class="w3-dropdown-click">\n    <button on-click="toggleMenu" class="w3-button w3-black"><i class="fa fa-bars"></i></button>\n    <div class="w3-dropdown-content w3-bar-block w3-card-4" style="z-index: 1002;">\n      <a href="templates" route-link on-click="hideMenu" class="w3-bar-item w3-button">Libros en <i>OpenLibra</i></a>\n      <a href="schedule" route-link on-click="hideMenu" class="w3-bar-item w3-button">Agenda</a>\n      <a href="strava" route-link on-click="hideMenu" class="w3-bar-item w3-button">Strava</a>\n      <hr style="margin:0"/>\n      <a href="templates/get-value" route-link on-click="hideMenu" class="w3-bar-item w3-button">Templates</a>\n      <a href="templates/utils" route-link on-click="hideMenu" class="w3-bar-item w3-button">addEventListeners</a>\n    </div>\n  </div>\n  <a href=""          route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button selected">Inicio</a>\n  <a href="el-tiempo" route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button">El tiempo</a>\n  <a href="list"      route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button">Notas</a>\n  <a href="note"      route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button">+</a>\n  <a href="about"     route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button w3-right">?</a>\n  ';var h=function(e){let t,n={root:{},id:"menu.component.ref",init:function(){},render:function(){let e={id:"appMenu",innerHTML:m.format(this),className:"w3-bar w3-black"};return this.root=i.build("nav",e),this.root},mounted:function(){f.addEventListeners(n.root,n.eventHandlers,{router:e.router,toggleMenu:o,hideMenu:r})},eventHandlers:{sync:function(e,t){r(),t.name===e.href.split("/").lastItem()?e.classList.add("selected"):e.classList.remove("selected")}}};function o(e){t=e.nextElementSibling,t.classList.toggle("w3-show")}function r(e){t&&t.classList.remove("w3-show")}return n};var b=function(){return{root:{},init:function(){},render:function(){return this.root=i.build("div",'  \n  <div class="w3-container w3-center w3-animate-left" style="padding-top:60px;">\n    <img src="./assets/img/logo.png" alt="logo" style="width: 300px">\n    <p>La app que te permite almacenar todas tus notas en el móvil!!!</p>\n  </div>').firstElementChild,this.root},mounted:function(){},dispose:function(){}}};class g{constructor(e){this.dbname=e,this.db=""}openDb(){return new Promise((e,t)=>{let n=window.indexedDB.open(this.dbname,1);n.onsuccess=t=>{this.db=t.target.result,e(this.db)},n.onerror=e=>{t("Error")},n.onupgradeneeded=e=>{this.db=e.target.result;try{this.db.objectStoreNames&&this.db.objectStoreNames.contains("notas")&&this.db.deleteObjectStore("notas")}catch(e){console.log(e)}this.db.createObjectStore("notas",{keyPath:"key"})}})}readAll(e){return new Promise((t,n)=>{var o=[];this.db.transaction(e,"readonly").objectStore(e).openCursor(IDBKeyRange.lowerBound(0)).onsuccess=e=>{var n=e.target.result;n?(o.push(n.value),n.continue()):t(o)}})}save(e,t){return new Promise(n=>{var o;(o=this.db.transaction(e,"readwrite").objectStore(e).put(t)).onsuccess=e=>{n(t)},o.onerror=e=>{console.log(e)}})}delete(e,t){return new Promise(n=>{var o;(o=this.db.transaction(e,"readwrite").objectStore(e).delete(t)).onsuccess=e=>{n()},o.onerror=e=>{console.log(e)}})}readOne(e,t){return new Promise(n=>{var o;(o=this.db.transaction(e,"readwrite").objectStore(e).get(t)).onsuccess=e=>{n(e.target.result)},o.onerror=e=>{console.log(e)}})}}const v='\n<div class="w3-border-bottom w3-animate-left" style="padding:0; font-size:14px;" id="note-{note.key}">\n  <div class="w3-container" style="padding:5px">\n    <div on-click="expandCollapse"><b>{note.title}</b><i class="w3-right w3-large fa fa-caret-down"></i></div>\n  </div>\n  <div class="w3-container" style="display:none;padding:0 4px">\n    <p id="editp-{note.key}" on-click="editNote" style="padding:2px;min-height:4em;margin:2px 0;white-space: pre-wrap">{formatText:note.text}</p>\n    <div class="w3-bar w3-center" style="padding:4px 0;">\n      <button type="button" id="delete-{note.key}" on-click="deleteNote" class="w3-button w3-border"><i class="fa fa-trash" aria-hidden="true"></i></button>\n      <button type="button" id="fav-{note.key}" on-click="saveFavorites" class="w3-button w3-border"><i class="fa {css:@note.key}" aria-hidden="true"></i></button>\n      <button type="button" id="edit-{note.key}" on-click="editNote" class="w3-button w3-border"><i class="fa fa-edit" aria-hidden="true"></i></button>\n    </div>\n  </div>\n</div>';var w=function(e){let t,n,o=[],r=[],a={root:{},init:function(){},render:function(){return this.root=i.build("div",'\n<div notas-container style="padding:0; margin-bottom:43px;" class="w3-animate-left"></div>\n<button btn-add-note on-click="addNote" class="w3-button w3-black w3-circle">＋</button>'),n=this.root.firstElementChild,this.root},mounted:function(){t=new g("notas-app.db"),t.openDb().then(e=>{s()}),f.addEventListeners(a.root,a.eventHandlers)},eventHandlers:{addNote:function(t,n){e.router.navigateTo("note")},deleteNote:function(e,n){let i=parseInt(e.id.split("-")[1]),r=o.where({key:i})[0],a=document.getElementById("note-{0}".format(i));t.delete("notas",i).then(()=>{o.remove(r),a.parentNode.removeChild(a)})},expandCollapse:function(e,t){let n=e.parentNode.nextElementSibling.style;"none"==n.display?(n.display="",e.querySelector("i").classList.remove("fa-caret-down"),e.querySelector("i").classList.add("fa-caret-up")):(n.display="none",e.querySelector("i").classList.remove("fa-caret-up"),e.querySelector("i").classList.add("fa-caret-down"))},saveFavorites:function(e,t){let n=e.firstElementChild,o=e.id.split("-")[1];r.includes(o)?(r.remove(o),n.classList.add("fa-star-o"),n.classList.remove("fa-star")):(r.push(o),n.classList.remove("fa-star-o"),n.classList.add("fa-star"));window.localStorage.setItem("favorites",r.join("-"))},editNote:function(t,n){e.router.navigateTo("note/"+t.id.split("-")[1])}}};function s(){t.readAll("notas").then(e=>{o=e.reverse(),r=(window.localStorage.getItem("favorites")||"").split("-"),n.innerHTML="",o.map(e=>{let t={note:e,formatText:function(e){return e},css:function(e){return r.includes(e.toString())?"fa-star":"fa-star-o"}};return i.build("div",v.format(t))}).map(e=>e.firstElementChild).forEach(e=>{n.appendChild(e)}),f.addEventListeners(n,a.eventHandlers)})}return a};var y=function(){return{root:{},init:function(){},render:function(){return this.root=i.build("div",'  \n<div class="w3-container w3-margin-bottom w3-animate-left">\n  <h1>Sobre Notas App</h1>\n  <p style="text-indent:1em;">\n    Notas App es una prueba de concepto de lo que podría ser un <span class="w3-bold w3-italic">framework</span> \n    sencillo con el cual desarrollar aplicaciones <span class="w3-bold w3-italic">SPA</span> basadas únicamente en <span class="w3-bold">HTML5</span> y <span class="w3-bold">JavaScript</span>.\n  </p>\n  <p style="text-indent:1em;">\n    Estas aplicaciones serían subceptibles de ser instaladas en dispositivos móviles como una <span class="w3-bold w3-italic">PWA</span>.\n  </p>\n  <ul class="w3-ul w3-border">\n    <li><h2>Referencias</h2></li>\n    <li><a href="https://es.wikipedia.org/wiki/Single-page_application" target="_blank">SPA (Single-page application)</a></li>\n    <li><a href="https://es.wikipedia.org/wiki/Progressive_Web_Apps" target="_blank">PWA (Progressive Web Apps)</a></li>\n    <li><h2>Repositorio</h2></li>\n    <li><a href="https://github.com/rcastrogo/notas-app" target="_blank">https://github.com/rcastrogo/notas-app</a></li>\n  </ul>\n  <p style="text-indent:1em;">\n    Para su desarrollo no se han utilizado ninguno de los <span class="w3-bold w3-italic">frameworks</span> existentes como pueden ser Angular, React o Vue.js.\n  </p>\n</div>\n<div class="w3-container w3-margin-bottom w3-center">\n  <button type="button" about-btn-back class="w3-button w3-black">Volver</button>\n</div>\n'),this.root},mounted:function(){this.root.querySelector("[about-btn-back]").onclick=()=>{history.back()}}}};const x=s.TOPICS;var E=function(e){let t,n,o={root:{},init:function(){},render:function(){return this.root=i.build("div",'  \n<div class="w3-container w3-margin-bottom w3-animate-left">\n  <h2>Nueva nota</h2>\n  <form class="w3-margin-bottom">\n    <label for="txt-title">Título</label>\n    <input on-change="onChange" class="w3-input w3-border" type="text" id="txt-title" placeholder="Introduce un título" >\n    <label for="txt-text">Texto</label>\n    <textarea on-change="publish" class="w3-input w3-border" id="txt-text" rows="4" placeholder="Contenido de la nota"></textarea>\n  </form>\n  <div class="w3-container w3-margin-bottom w3-center w3-animate-zoom">\n    <button type="button" id="btn-grabar" class="w3-button w3-black">Grabar</button>\n  </div>\n</div>\n'),this.root},mounted:function(){!function(){let a=o.root.firstElementChild;a.style.display="none",f.addEventListeners(a,{},{onChange:function(e){}}),s.subscribe(x.VALUE_CHANGE,(function(e,t){})),n=new g("notas-app.db"),n.openDb().then(()=>{let s=function(){a.style.display="",i.$("btn-grabar").onclick=r},l=e.router.current.params[1]||"";l?n.readOne("notas",parseInt(l)).then(e=>{t=e,i.$("txt-title").value=t.title,i.$("txt-text").value=t.text,i.$("h2",o.root)[0].innerHTML="Edición de nota",s()}):s()})}()}};function r(){var o=i.$("txt-title"),r=i.$("txt-text"),a=o.value.trim(),l=r.value.trim();if(!a)return void setTimeout(()=>o.focus(),20);if(!l)return void setTimeout(()=>r.focus(),20);let c=new Date;n.save("notas",{key:t?t.key:c.valueOf(),date:t?t.date:"{0}/{1}/{2}".format(c.getDate(),c.getMonth(),c.getFullYear()),title:a,text:l}).then(n=>{e.router.navigateTo("list"),s.publish(x.NOTIFICATION,{message:t?"La nota se ha actualizado correctamente!!!":"La nota se ha insertado correctamente!!!"})})}return o};const k=s.TOPICS;var S=function(e){let t,n,o,r,a={root:{},data:{municipios:{45022:"Buenaventura (TOLEDO)",28079:"Madrid"}},init:function(){},render:function(){return this.root=i.build("div",'  \n<div class="w3-container w3-margin-bottom w3-animate-bottom">\n  <div class="w3-border w3-margin-top">\n    <button on-click="expandCollapse" class="w3-button w3-block w3-left-align">\n      <span on-publish="TOPICS.MUNICIPIO_CHANGE:innerHTML">Buenaventura</span><i class="w3-right w3-large fa fa-caret-down"></i>\n    </button>\n    <div class="w3-hide">\n      <ul class="w3-ul">\n        <li on-click="requestData" id="loc-45022">Buenaventura</li>\n        <li on-click="requestData" id="loc-28079">Madrid</li>\n      </ul>\n    </div>\n  </div>\n  <div class="w3-margin-top w3-hide" id="aemetApi-container" style="padding:0;">\n    <div id="progress-bar-container">\n      <div class="w3-center">Cargando datos desde la AEMET...</div>\n      <div class="w3-border">\n        <div id="progress-bar" class="w3-green" style="height:24px;width:0%"></div>\n      </div>\n    <div>\n  </div>\n</div>'),this.root},mounted:function(){t=i.$("aemetApi-container"),o=i.$("progress-bar"),n=i.$("progress-bar-container"),f.addEventListeners(a.root,a.eventHandlers,{css:(e,t)=>{console.log(e)}}),c()},dispose:function(){clearInterval(r)},eventHandlers:{expandCollapse:d,requestData:function(e,t){let n=e.parentNode.parentNode.previousElementSibling;l=e.id.split("-")[1],s.publish(k.MUNICIPIO_CHANGE,a.data.municipios[l]),d(n),c()}}};let l=45022;function c(){!function(){let e=0;o.style.width="{0}%".format(e),r&&clearInterval(r),r=setInterval(()=>{e=(e+9)%100,o.style.width="{0}%".format(e)},300)}(),t.innerHTML="",t.appendChild(n),t.classList.remove("w3-hide");const a="https://opendata.aemet.es/opendata/api/prediccion/especifica/municipio/horaria/"+l+"?api_key=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJyY2FzdHJvZ29AaG90bWFpbC5jb20iLCJqdGkiOiJmZmI3OWJjZi1lZWQwLTQwODMtYTkwZC04MmNkMmRhMTA2MjQiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTU4MjcyNTg3NiwidXNlcklkIjoiZmZiNzliY2YtZWVkMC00MDgzLWE5MGQtODJjZDJkYTEwNjI0Iiwicm9sZSI6IiJ9.bPhAJDutP62_75peo3qr88Qs1JQ4jmu6TWXHjvIzZx0";i.ajax.get(a,e=>{e.setRequestHeader("Accept","application/javascript")}).then(e=>JSON.parse(e)).then(e=>{if(200==e.estado)return i.ajax.get(e.datos);throw new Error(e.descripcion)}).then(n=>{var o;clearInterval(r),t.innerHTML="",(o=function(){const e='\n  <div class="w3-container w3-teal w3-center w3-small w3-padding">\n    {elaborado:fn.formatFecha=>time}\n  </div>\n  <div style="padding:0">\n    <h3 class="w3-center w3-border-bottom">{prediccion.dia[0].fecha:fn.formatFecha => day}</h3>\n    <div>{fn.showDay:@rows-0}</div>\n    <div class="w3-small w3-teal w3-padding w3-center">\n      <div><i class="fa fa-arrow-up"></i> {prediccion.dia[0].orto}</div>\n      <div><i class="fa fa-arrow-down"></i> {prediccion.dia[0].ocaso}</div>\n    </div>\n  </div>\n  <br/>\n  <div style="padding:0">\n    <h3 class="w3-center w3-border-bottom">{fn.formatFecha:@prediccion.dia[1].fecha day}</h3>\n    <div>{fn.showDay:@rows-1}</div>\n    <div class="w3-small w3-teal w3-padding w3-center">\n      <div><i class="fa fa-arrow-up"></i> {prediccion.dia[1].orto}</div>\n      <div><i class="fa fa-arrow-down"></i> {prediccion.dia[1].ocaso}</div> \n    </div>\n  </div>\n  <br/>\n  <div style="padding:0">\n    <h3 class="w3-center w3-border-bottom">{fn.formatFecha:@prediccion.dia[2].fecha day}</h3>\n    <div>{fn.showDay:@rows-2}</div>\n    <div class="w3-small w3-teal w3-padding w3-center">\n      <div><i class="fa fa-arrow-up"></i> {prediccion.dia[2].orto}</div>\n      <div><i class="fa fa-arrow-down"></i> {prediccion.dia[2].ocaso}</div>\n    </div>\n  </div>';let t={formatFecha:function(e,t){let n=e.split("T");if(t&&"date"===t)return n[0];if(t&&"time"===t)return n[1];if(t&&"day"===t){n=n[0].split("-");let e=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sabado"],t=new Date(~~n[0],~~n[1]-1,~~n[2]).getDay();return"{0} {1}".format(e[t],~~n[2])}return"{1} - {0}".format(...n)},showDay:function(e){return e.reduce((function(e,n){let o='\n          <tr class="w3-center">\n            <td>{row.periodo}:00</td>\n            <td>{row.cielo}</td>\n            <td>{row.temperatura}</td>\n            <td>{fn.formatZero:@row.lluvia}</td>\n            <td><i class="fa fa-2x fa-long-arrow-right pol-{row.viento[0]}"></i> {row.viento[1]}</td>\n          </tr>',i={row:n,fn:t};return e.append(o.format(i))}),i.stringBuilder().append('<table class="w3-table w3-bordered w3-small w3-striped">').append('<tr class="w3-center w3-teal"><th>Hora</th><th>Cielo</th><th>Temp<br>ºC</th><th>Lluvia<br>mm</th><th>Viento<br>km/h</th></tr>')).append("</table>").value},formatZero:function(e){return"0"==e?"":e}};return{root:{},init:function(){},render:function(){return this.root=i.build("div",e.format(this.data)),this.root},mounted:function(){},withData:function(e){let n=(o=new Date,"{0|paddingLeft,0000}-{1|paddingLeft,00}-{2|paddingLeft,00}-{3|paddingLeft,00}".format(""+o.getFullYear(),""+(o.getMonth()+1),""+o.getDate(),""+o.getHours()));var o;return this.data=JSON.parse(e)[0],this.data.fn=t,this.data.prediccion.dia.reduce((function(e,t,o){let i=t.fecha.fixDate("T"),r=[].concat(t.estadoCielo.map((function(e){return{t:"c",periodo:e.periodo,value:e.descripcion}})),t.temperatura.map((function(e){return{t:"t",periodo:e.periodo,value:e.value}})),t.precipitacion.map((function(e){return{t:"p",periodo:e.periodo,value:e.value}})),t.vientoAndRachaMax.where(e=>e.velocidad).map((function(e){return{t:"v",periodo:e.periodo,value:[e.direccion[0],e.velocidad[0]]}}))).where(e=>"{0}-{1}".format(i,e.periodo)>=n).groupBy("periodo");return e["rows-{0}".format(o)]=Object.keys(r).reduce((function(e,t){let n=r[t];return e.push({periodo:t,cielo:n.where({t:"c"})[0].value,temperatura:n.where({t:"t"})[0].value,lluvia:n.where({t:"p"})[0].value,viento:n.where({t:"v"})[0].value}),e}),[]).sortBy("periodo"),e}),this.data),this}}}().withData(n)).init(e),t.appendChild(o.render()),o.mounted(e)}).catch(e=>{clearInterval(r),console.log(e)})}function d(e,t){let n=e.nextElementSibling.classList;n.contains("w3-hide")?(n.remove("w3-hide"),e.querySelector("i").classList.remove("fa-caret-down"),e.querySelector("i").classList.add("fa-caret-up")):(n.add("w3-hide"),e.querySelector("i").classList.remove("fa-caret-up"),e.querySelector("i").classList.add("fa-caret-down"))}return a};const C=s.TOPICS;let I=function(e){let t,n,o,r;function a(e){n.where(t=>""===t.src&&t.offsetTop-800<e).map(e=>e.src=e.id)}function l(o){t.innerHTML='\n    <div class="w3-card-4 w3-margin-top w3-margin-bottom w3-center">\n      <header class="w3-container w3-light-grey">\n        <h1>Libros</h1>\n      </header>\n      <div id="progress-bar-container">\n        <div id="progress-bar" class="w3-green" style="height:10px;width:22%"></div>\n      <div>\n    </div>',function(){let e=i.$("progress-bar"),t=0;e.style.width="{0}%".format(t),r&&clearInterval(r),r=setInterval(()=>{t=(t+9)%100,e.style.width="{0}%".format(t)},300)}(),i.ajax.get("./assets/js/libros.json",e=>{e.setRequestHeader("Accept","application/javascript")}).then(e=>JSON.parse(e)).then(e=>e.where("cat"===o.tipo?function(e){return e.categories.where({nicename:o.id}).length}:function(e){return e.tags.where({nicename:o.id}).length}).slice(0,Math.min(e.length,25)).sortBy("title")).then(o=>{t.innerHTML="";let r=o.groupBy((function(e){return e.title[0].toUpperCase()}));o.bookmarks=Object.keys(r).reduce((function(e,t){return e.keys[t]?e:(e.keys[t]=r[t],e.rows.push({letra:t,id:e.keys[t][0].ID}),e)}),{keys:{},rows:[]}).rows,function(n){let o=i.build("div",'\n      <div class="w3-card-4 w3-margin-top w3-margin-bottom w3-center">\n        <header class="w3-container w3-light-grey" id="rafa">\n          <h1>Libros</h1>\n        </header>\n        <span xbind="" class="w3-small">{length:fn.formatId2} Elementos</span>\n        <div class="w3-light-grey w3-tiny" style="overflow:auto;width:100%">    \n          <div book-cat xfor="bookmark in bookmarks" class="w3-cell" >\n            <p xbind="id:bookmark.id" on-click="goToBookmark" class="w3-border w3-round w3-white" style="padding:2px 6px;margin:2px 4px;white-space:nowrap;">{bookmark.letra}</p>\n          </div>\n        </div>\n      </div>\n      <div xfor="libro in this" class="w3-card-4 w3-margin-bottom" xbind="id:fn.formatId => @libro.ID mark">\n        <header class="w3-container w3-light-grey" on-click="expandCollapse">\n          <h4 xbind="">{libro.title}</h4>\n        </header>\n        <div class="w3-container" style="transition: max-height .31s; overflow: hidden; max-height:500px">\n\n          <div xbind="" class="w3-container" style="padding:3px 0">\n            <img xbind="id:libro.thumbnail;tag:index" alt="Portada" on-click="showImage" class="book w3-left w3-margin-right w3-margin-bottom">\n            <b>Autor</b> {libro.author}<br/>\n            <b>Páginas</b> {libro.pages}<br/>\n            <b>Año</b> {libro.publisher_date}<br/>\n            <b>Editorial</b> {libro.publisher}<br/>\n            <b>Idioma</b> {libro.language}\n            <div xbind="id:fn.formatId => @libro.ID book;innerHTML:libro.content_short|htmlDecode" \n                 on-click="showAllContent" \n                 style="clear:both;margin-block-start: 0; font-style: oblique;font-family: monospace;">\n            </div>\n          </div>\n\n          <div class="w3-small" xbind="">Categorías ({libro.categories.length})</div>\n          <div class="w3-border w3-light-grey w3-small w3-round" style="overflow:auto;width:100%">\n            <div book-cat xfor="categoria in libro.categories" class="w3-cell">\n              <p xbind="id:categoria.nicename;innerHTML:categoria.name" on-click="makeRequest:cat" class="w3-border w3-round w3-white" style="padding:6px;margin:6px;white-space:nowrap;"></p>\n            </div>\n          </div>\n\n          <div class="w3-small" xbind="">Etiquetas ({libro.tags.length})</div>\n          <div class="w3-border w3-light-grey w3-small w3-round w3-margin-bottom" style="overflow:auto;width:100%">\n            <div book-cat xfor="etiqueta in libro.tags" class="w3-cell">\n              <p xbind="id:etiqueta.nicename;innerHTML:etiqueta.name" on-click="makeRequest:tag" class="w3-border w3-round w3-white" style="padding:6px;margin:6px;white-space:nowrap;"></p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <button btn-add-note on-click="goTop" class="w3-button w3-black w3-circle">^</button>\n    ');n.fn={formatId:function(e,t,n){return"{0}-{1}".format(t,e)},htmlDecode:function(e){return e.htmlDecode()},formatId2:function(e,t,n,o){return e}};let r=n.toDictionary("ID");t.appendChild(i.templates.fill(o,n)),f.addEventListeners(t,{},{showAllContent:(e,t)=>{e.onclick=void 0;let n=e.id.split("-")[1];e.innerHTML=r[n].content.htmlDecode();let o=e.parentNode.parentNode;o.style.maxHeight="{0}px".format(o.scrollHeight)},makeRequest:function(e,t,n){l({tipo:n,id:e.id})},expandCollapse:function(e,t){let n=e.nextElementSibling.style,o="{0}px".format(e.nextElementSibling.scrollHeight);"500px"==n.maxHeight?n.maxHeight="0px":n.maxHeight!=o?n.maxHeight=o:n.maxHeight="0px"},goTop:()=>{e.components[0].root.scrollIntoView()},goTo:function(e,t,n){t.preventDefault(),i.$(n).scrollIntoView({behavior:"smooth",block:"end"})},goToBookmark:function(e,t){t.preventDefault(),i.$("mark-{0}".format(e.id)).scrollIntoView({behavior:"smooth",block:"end"})},showImage:function(t){e.router.navigateTo("images/{0}".format(n[t.tag].ID))}})}(o),n=i.$("img",t),a(0)}).catch(e=>{console.log(e)}).finally(()=>{clearInterval(r)})}return{root:{},data:{},init:function(){},render:function(){return this.root=i.build("div",'\n  <div class="w3-container w3-margin-bottom w3-animate-left">\n  </div>',"firstElementChild"),t=this.root,this.root},mounted:function(){l({tipo:"cat",id:"libros_programacion"}),o=s.subscribe(C.WINDOW_SCROLL,(e,t)=>{a(t.scrollY)})},dispose:function(){clearInterval(r),s.unsubscribe(o)},eventHandlers:{}}},L=function(e){return{root:{},data:{},init:function(e){},render:function(e){return this.root=i.build("div",'\n  <div class="w3-container w3-margin-bottom w3-animate-left">\n    <h1>Templates</h1>\n    <p style="text-indent:1em;">\n      Documentación sobre los métodos y los parámetros utilizados en la plantillas.\n    </p>\n    <h3>getValue</h3>\n    <p style="text-indent:1em;">\n      El método <span class="w3-bold w3-italic">getValue</span> permite obtener el valor de un objeto por medio de una cadena de texto.\n      El valor recuperado puede ser a su vez un objeto o una función.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      getValue(\'window.location\');\n    </div>\n    <p style="text-indent:1em;">\n      Se pueden obtener valores de elementos específicos de un array.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      getValue(\'window.location.hostname[0]\');\n    </div>\n    <p style="text-indent:1em;">\n      Al valor se le puede aplicar cualquier función de su prototipo así como especificar los parámetros si es que son requeridos.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      getValue(\'location.host|toUpperCase\');\n      <br/>\n      getValue(\'location.host.length|toFixed,3\');\n    </div>\n    <p style="text-indent:1em;">\n      Se puede especificar el ámbito  o contexto en el que se relizará la búsqueda.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      getValue(\'id|toFixed,3\', { id : 5 })\');\n    </div>\n    <p style="text-indent:1em;">\n      Se puede utlizar la palabra <i>this</i> para acceder al ámbito o contexto asociado.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      getValue(\'this\', { id : 5 })\');\n    </div>\n    <p style="text-indent:1em;">\n      En el caso de no existir el valor en el ámbito actual se intentará encontrar en un ámbito asociado si es que existe.\n      Para ello se comprueba que existe la propiedad <i>outerScope</i> que sera el ámbito de búsqueda.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      getValue(\'id\', { items : [1,2,3] , outerScope : { id : 5 }})\');\n    </div>\n    <h3>merge</h3>\n    <p style="text-indent:1em;">\n      El método <span class="w3-bold w3-italic">merge</span> permite aplicar los valores de un objeto a una plantilla de texto.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      merge(\'Url: {window.location.href}\');<br>\n      merge(\'Id: {id}\', { id : 5 });\n    </div>\n    <p style="text-indent:1em;">\n      Para determinar los valores de reemplazo se utiliza el método <span class="w3-bold w3-italic">getValue</span>.\n      Es por tanto válido el uso de la sintaxis:\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      merge(\'Nombre: {nombre|toUpperCase}\', { nombre : \'Nombre\' });<br>\n      merge(\'Id: {id|toFixed,2}\', { id : 5 });\n    </div>\n    <p style="text-indent:1em;">\n      Si el valor indicado es una función, esta será invocada con el ámbito o contexto actual y \n      el valor devuelto será el utilizado a la hora de realizar la transformación.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      merge(\'Id: {format=>a b|toLowerCase;c}\', { id : 5 , format : function(a,b,c){ return this.id; } });\n    </div>\n    <p style="text-indent:1em;">\n      Es posible especificar una función de transformación. Se utiliza el caracter ":" como separador.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      merge(\'{tag:format}\', { tag : \'DIV\', format : function(s){ return \'Tag: \' + s.toLowerCase(); } });<br>\n      merge(\'{tag|trim:format=>a @tag|toLowerCase;c}\', { tag : \'DIV   \', format : function(value,a,b,c){ return \'Tag: \' + value; } });<br>\n      merge(\'{tag|startsWith,D:format}\', { tag : \'DIV\', format : function(s){ return \'Tag: \' + s; } });<br>\n    </div>\n    <h3>string.format</h3>\n    <p style="text-indent:1em;">\n      El método <span class="w3-bold w3-italic">format</span> permite reemplazar lo valores de una cadena de texto.\n      La sintaxis es muy similar a el método <span class="w3-bold w3-italic">merge</span> aunque existen algunas diferencias entre ambos.\n    </p>\n    <p style="text-indent:1em;">\n      La principal diferencia radica en que <span class="w3-bold w3-italic">format</span> acepta un número indeterminado de parámetros de entrada.\n      Estos parámetros pueden ser referenciados en la plantilla por medio de su indice:\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      \'{0} - {1}\'.format(55, \'Nombre\');\n    </div>\n    <p style="text-indent:1em;">\n      El último parámetro proporcionado será tomado como el ámbito o contexto a la hora resolver referencias:\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      \'{0} - {nombre}\'.format(55, { nombre : \'Antonio\' });\n    </div>\n    <p style="text-indent:1em;">\n      Resumen de las posibles formas de uso:\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      \'{0|toFixed,2}\'.format(55);<br/>\n      \'{0|toUpperCase}\'.format(\'aaa\');<br/>\n      \'{0|toUpperCase:format}\'.format(\'aaa\', { format(value){ return \'->\' + value; } });<br/>\n      \'{0:format}\'.format(\'aaa\', { format(value){ return \'->\' + value; } });<br/>\n      \'{0:format=>1;2}\'.format(\'aaa\', { format(value,a,b){ return \'->\' + value + a + b; } });<br/>\n      \'{format}\'.format({ id : 55, format(){ return this.id; }});<br/>\n      \'{format:url;@window.location.href|toUpperCase b}\'.format({ format(value, href, b){ return value + \' \' + href;}});<br/>\n      \'{id}\'.format({ id : 55, format(){ return this.id; }});<br/>\n      \'{id|toFixed,3}\'.format({ id : 55 });<br/>\n      \'{id|toFixed,3:format}\'.format({ id : 55, format(v){ return v + \' €\'; }});<br/>\n      \'{id:format=>@window.location.href|toUpperCase;b;c}\'.format({ id : 55, format(v,a,b,c){ return v + \' €\'; }});<br/>\n    </div>\n    <h3>execute</h3>\n    <p style="text-indent:1em;">\n      El método <span class="w3-bold w3-italic">execute</span> permite aplicar a una plantilla (<span class="w3-bold w3-italic">HTMLElement</span>) los valores de todos y cada uno de los elementos de un array.\n    </p>\n    <p style="text-indent:1em;">\n      El valor devuelto puede ser o una cadena de texto para establecer la propiedad <span class="w3-bold w3-italic">innerHTML</span> o \n      un array de <span class="w3-bold w3-italic">HTMLElement</span> para añadirlos con el método <span class="w3-bold w3-italic">appendChild</span>.\n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      execute(HTMLElement|id, values, dom[true|false]);\n    </div>\n    <h3>fill</h3>\n    <p style="text-indent:1em;">\n      El método <span class="w3-bold w3-italic">fill</span> permite aplicar los valores de un ámbito o contexto una plantilla (<span class="w3-bold w3-italic">HTMLElement</span>).\n    </p>\n    <p style="text-indent:1em;">\n      El valor devuelto es la propia plantilla en la que se han establecido los valores especificados. \n    </p>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      fill(HTMLElement|id, scope);\n    </div>\n    <p style="text-indent:1em;">\n      Formas de modificar/crear contenido:\n      <ul>\n        <li>xbind</li>\n        <li>templates.merge</li>\n        <li>xfor</li>\n      </ul>\n    </p>\n    <h5>Plantilla:</h5>\n    <div class="w3-code htmlHigh" style="overflow: auto;white-space: pre;">\n&lt;header&gt;\n  &lt;h1&gt;Libros&lt;/h1&gt;\n&lt;/header&gt;\n&lt;span <b>xbind=&quot;&quot;</b>&gt;<b>{length:fn.formatId2}</b> Elementos&lt;/span&gt;\n&lt;div&gt;    \n  &lt;div <b>xfor=&quot;bookmark in bookmarks&quot;</b>&gt;\n    &lt;p <b>xbind=&quot;id:bookmark.id&quot;</b> on-click=&quot;goToBookmark&quot;&gt;<b>{bookmark.letra}</b>&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;<b>xfor=&quot;libro in this&quot;</b> <b>xbind=&quot;id:fn.formatId =&gt; @libro.ID mark&quot</b>;&gt;\n  &lt;header on-click=&quot;expandCollapse&quot;&gt;\n    &lt;h4 <b>xbind=&quot;&quot;</b>&gt;<b>{libro.title}</b>&lt;/h4&gt;\n  &lt;/header&gt;\n  &lt;div&gt;\n    &lt;div <b>xbind=&quot;&quot;</b>&gt;\n      &lt;img <b>xbind=&quot;id:libro.thumbnail&quot;</b>&gt;\n      &lt;b&gt;Autor&lt;/b&gt; <b>{libro.author}</b>&lt;br/&gt;\n      &lt;b&gt;P&#225;ginas&lt;/b&gt; <b>{libro.pages}</b>&lt;br/&gt;\n      &lt;b&gt;A&#241;o&lt;/b&gt; <b>{libro.publisher_date}</b>&lt;br/&gt;\n      &lt;b&gt;Editorial&lt;/b&gt; <b>{libro.publisher}</b>&lt;br/&gt;\n      &lt;b&gt;Idioma&lt;/b&gt; <b>{libro.language}</b>\n      &lt;div <b>xbind=&quot;id:fn.formatId =&gt; @libro.ID book;innerHTML:libro.content_short|htmlDecode&quot;</b> on-click=&quot;showAllContent&quot;&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div <b>xbind=&quot;&quot;</b>&gt;Categor&#237;as (<b>{libro.categories.length}</b>)&lt;/div&gt;\n    &lt;div&gt;\n      &lt;div <b>xfor=&quot;categoria in libro.categories&quot;</b>&gt;\n        &lt;p <b>xbind=&quot;id:categoria.nicename;innerHTML:categoria.name&quot;</b> on-click=&quot;makeRequest:cat&quot;&gt;&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n    </div>\n\n    <h5>Datos:</h5>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: pre;">\n[\n  {\n    "ID": "17003",\n    "title": "Book of Scratch Vol. 1",\n    "author": "Varios",\n    "content": "The first ever Code Club bo...",\n    "content_short": "The first ever Code Club book...",\n    "publisher": "Raspberry Pi Press",\n    "publisher_date": "2018",\n    "pages": "111",\n    "language": "english",\n    "url_details": "http://www.etnassoft.com/biblioteca/book-of-scratch-vol-1/",\n    "url_download": "https://openlibra.com/book/book-of-scratch-vol-1",\n    "cover": "https://olcovers2.blob.core.windows.net/coverswp/2018/12/CC_Book_of_Scratch_v1-OpenLibra-339x461.gif",\n    "thumbnail": "https://olcovers2.blob.core.windows.net/coverswp/2018/12/CC_Book_of_Scratch_v1-OpenLibra-110x153.gif",\n    "categories": [\n      {\n        "category_id": 224,\n        "name": "Otros Lenguajes",\n        "nicename": "programacion_otros_lenguajes"\n      },\n      {\n        "category_id": 220,\n        "name": "Programación",\n        "nicename": "libros_programacion"\n      }\n    ]\n  }\n]\n    </div>\n\n    <h3>xbind</h3>\n    <p style="text-indent:1em;">\n      El atributo <span class="w3-bold w3-italic">xbind</span> permite determinar que elementos <span class="w3-bold w3-italic">HTMLElement</span>\n      serán procesados y en los que se reliazará la sustitución.\n    </p>\n    <p style="text-indent:1em;">\n      El contenido de este atributo es una lista de pares (propiedad:valor|función) separados por el caracter ";".\n      El valor obtenido es asignado a la propiedad correspondiente del <span class="w3-bold w3-italic">HTMLElement</span>.\n    </p>\n    <p style="text-indent:1em;">\n      Si el valor obtenido fuera una función, esta se invocará para obtener el valor de reemplazo. La función se ejecuta en el ámbito o\n      contexto altual y se le pasan los parámetros indicados después de "=>". Estos parámetros son procesados por el método <span class="w3-bold w3-italic">getValue</span>\n      si empiezan por "@".\n    </p>\n    <div class="w3-code htmlHigh" style="overflow: auto;white-space: nowrap;">\n      &lt;img xbind=&quot;id:libro.thumbnail&quot;&gt;<br/>\n      &lt;p xbind=&quot;id:categoria.nicename;innerHTML:categoria.name&quot;&gt;&lt;/p&gt;<br/>\n      &lt;div xbind=&quot;innerHTML:libro.content_short|trim&quot;&gt; &lt;/div&gt;<br/>\n      &lt;xfor=&quot;libro in this&quot; xbind=&quot;id:fn.formatId =&gt; @libro.ID mark&quot;;&gt;<br/>\n      &nbsp&nbsp&lt;div xbind=&quot;&quot;&gt;<br/>\n      &nbsp&nbsp&nbsp&nbspCategor&#237;as ({libro.categories.length})<br/>\n      &nbsp&nbsp&lt;/div&gt;<br/>\n      &lt;/div&gt;\n    </div>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      data.fn = {<br/>\n      &nbsp&nbsp  formatId: function (id, prefix, element) {<br/>\n      &nbsp&nbsp&nbsp&nbsp    return \'{0}-{1}\'.format(prefix, id);<br/>\n      &nbsp&nbsp  }<br/>\n      }\n    </div>\n  </div>'),this.root},mounted:function(e){i.Include("https://www.w3schools.com/lib/w3codecolor.js").then(()=>w3CodeColor())},dispose:function(){},eventHandlers:{}}},T=function(e){return{root:{},data:{},init:function(e){},render:function(e){return this.root=i.build("div",'\n  <div class="w3-container w3-margin-bottom w3-animate-left">\n    <h1>Utils</h1>\n    <p style="text-indent:1em;">\n      Documentación sobre los métodos y los parámetros utilizados para la asociación de eventos de forma declarativa.\n    </p>\n    <h3>addEventListeners</h3>\n    <p style="text-indent:1em;">\n      El método <span class="w3-bold w3-italic">addEventListeners</span> permite realizar la asociación de una serie de\n      eventos de una forma declarativa.\n    </p>\n    <p style="text-indent:1em;">\n      Los eventos disponibles son:\n      <ul>\n        <li>on-click</li>\n        <li>on-publish</li>\n        <li>route-link</li>\n        <li>on-change</li>\n      </ul>\n    </p>\n    <p style="text-indent:1em;">\n      El método tiene la siguiente firma;\n      <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n        addEventListeners(container, handlers, context);<br>\n        <br>\n        utils.addEventListeners(<br>component.root, \n                                <br>component.eventHandlers, { \n                                <br>&nbsp router      : component.router,\n                                <br>&nbsp toggleMenu  : toggleMenu,\n                                <br>&nbsp hideMenu    : hideMenu\n                                <br>});\n      </div>\n      <i>Container</i> es el <span class="w3-bold w3-italic">HTMLElement</span> raíz en el que se realizará el enlace.\n      <i>Handlers</i> y <i>context</i> son objetos en los que residen las funciones referenciadas. La búsqueda se realiza en el orden indicado.\n      Si la función no existe en <i>handlers</i> se busca en <i>context</i>.\n    </p>\n    <h4>on-click</h4>\n    <p style="text-indent:1em;">\n      El atributo <span class="w3-bold w3-italic">on-click</span> permite asociar el evento click de un elemento con una función.\n      La función se ejecutará en el contexto proporcionado. Es posible pasar parámetros adicionales a la función. Los parámetros \n      se separan por el caracter ":".\n      <div class="w3-code htmlHigh" style="overflow: auto;white-space: nowrap;">\n        &lt;button on-click=&quot;addNote:1:@id&quot;&gt;＋&lt;/button&gt;<br>\n      </div>\n      <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n        function addNote(target, mouseEvent, 1, 55);\n      </div>\n    </p>\n    <h4>on-publish</h4>\n    <p style="text-indent:1em;">\n      El atributo <span class="w3-bold w3-italic">on-publish</span> permite realizar la \n      subcripción a una determinada publicación o mensaje y asociarla con una función encargada de su proceso.\n      La función se ejecutará en el contexto proporcionado.\n      <div class="w3-code htmlHigh" style="overflow: auto;white-space: nowrap;">\n        &lt;a href=&quot;&quot; route-link on-publish=&quot;TOPICS.VIEW_CHANGE:syncMenuItem&quot;&gt;Inicio&lt;/a&gt;<br>\n      </div>\n      <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n        function syncMenuItem(target, data){\n          <br>&nbsp hideMenu();\n        <br>}\n      </div>\n      Existen dos funciones para realizar el cambio de algunos valores.\n      <div class="w3-code htmlHigh" style="overflow: auto;white-space: nowrap;">\n        &lt;span on-publish=&quot;TOPICS.XXX_CHANGE:innerHTML&quot;&gt;Madrid&lt;/span&gt;\n      </div>\n      <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n        <br>let fn = {\n        <br>&nbsp innerHTML : (e, value) => e.innerHTML = value,\n        <br>&nbsp className : (e, value) => e.className = value\n        <br>}\n      </div>\n    </p>\n    <h4>route-link</h4>\n    <p style="text-indent:1em;">\n      El atributo <span class="w3-bold w3-italic">route-link</span> permite asociar el evento click de un \n      <span class="w3-bold w3-italic">HTMLAnchorElement</span> con una función que automáticamente cambiará la ruta\n      actual a la establecida en su propiedad href. El atributo no tiene parámetros.\n      <div class="w3-code htmlHigh" style="overflow: auto;white-space: nowrap;">\n        &lt;a href=&quot;templates/utils&quot; route-link on-click=&quot;hideMenu&quot;&gt;Utils&lt;/a&gt;<br>\n        &lt;a href=&quot;about&quot; route-link on-publish=&quot;TOPICS.VIEW_CHANGE:sync&quot;&gt;?&lt;/a&gt;\n      </div>\n    </p>\n    <p style="text-indent:1em;">\n      Es necesario proporcionar una referencia a router en el contexto en la llamada..\n      <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n        utils.addEventListeners(<br>&nbsp component.root, \n                                <br>&nbsp component.eventHandlers,\n                                <br>&nbsp { \n                                <br>&nbsp&nbsp router      : component.router,\n                                <br>&nbsp&nbsp toggleMenu  : toggleMenu,\n                                <br>&nbsp&nbsp hideMenu    : hideMenu\n                                <br>&nbsp });\n      </div>\n    </p>\n    <h4>on-change</h4>\n    <p style="text-indent:1em;">\n      El atributo <span class="w3-bold w3-italic">on-change</span> permite controlar el cambio de los valores en \n      los elementos <span class="w3-bold w3-italic">HTMLInputElement</span> y <span class="w3-bold w3-italic">HTMLSelectElement</span>.\n      El valor del atributo puede ser una función o \'publish\'. En el primer caso la función especificada recibe las notificaciones.\n      La función se ejecutará en el contexto proporcionado.\n      En el segundo caso automaticamente se creará un publicador de mensajes de cambio.\n    </p>\n    <div class="w3-code htmlHigh" style="overflow: auto;white-space: nowrap;">\n      &lt;h2&gt;Nueva nota&lt;/h2&gt;<br>\n      &lt;form&gt;<br>\n        &nbsp &lt;label for=&quot;txt-title&quot;&gt;T&#237;tulo&lt;/label&gt;<br>\n        &nbsp &lt;input on-change=&quot;onChange&quot; type=&quot;text&quot; id=&quot;txt-title&quot; &gt;<br>\n        &nbsp &lt;label for=&quot;txt-text&quot;&gt;Texto&lt;/label&gt;<br>\n        &nbsp &lt;textarea on-change=&quot;publish&quot; id=&quot;txt-text&quot; rows=&quot;4&quot;&gt;&lt;/textarea&gt;<br>\n      &lt;/form&gt;<br>\n      &lt;div&gt;<br>\n        &nbsp &lt;button type=&quot;button&quot; id=&quot;btn-grabar&quot;&gt;Grabar&lt;/button&gt;<br>\n      &lt;/div&gt;<br>\n    </div>\n    <div class="w3-code jsHigh" style="overflow: auto;white-space: nowrap;">\n      utils.addEventListeners(__container, {}, {\n      <br>&nbsp onChange: (e) => {\n      <br>&nbsp&nbsp   console.log(\'onChange_fn\', e.value);\n      <br>&nbsp }\n      <br>&nbsp });\n      <br>&nbsp pubsub.subscribe(TOPICS.VALUE_CHANGE, (message, e) => {\n      <br>&nbsp&nbsp   console.log(\'value.change\', e.value);\n      <br>&nbsp })\n    </div>\n\n\n  </div>'),this.root},mounted:function(e){i.Include("https://www.w3schools.com/lib/w3codecolor.js").then(()=>w3CodeColor())},dispose:function(){},eventHandlers:{}}};var q=n(0),H=n.n(q),N=function(e){let t={root:{},init:function(){},render:function(){return this.root=i.build("div",H.a,"firstElementChild"),e=this.root,f.addEventListeners(e,{goBack:()=>{history.back()}}),e;var e},addButton:e=>{t.root.firstElementChild.appendChild(e)}};return t},O=n(1),M=n.n(O);const j=s.TOPICS;var _=function(e){let t=N(),n={};return{root:{},init:function(){},render:function(){var e;return this.root=t.render(),n=i.build("div",M.a,"firstElementChild"),this.root.appendChild((e=n,f.addEventListeners(e,{notify:()=>{s.publish(j.NOTIFICATION,{message:"Imagen mostrada"})}}),e)),this.root},mounted:function(){s.publish("msg\\page_component\\update\\title","Imagen"),i.ajax.get("./assets/js/libros.json",e=>{e.setRequestHeader("Accept","application/javascript")}).then(t=>{let o=JSON.parse(t),i=e.router.current.params[1],r=o.where({ID:i})[0].cover;n.style.backgroundImage="url({0})".format(r)}).catch(e=>{console.log(e)}).finally(()=>{})}}},A=n(2),V=n.n(A),P=function(e){let t,o=N(),r={};function a(e,t){e.ClearMonthView(),e.LoadMonthView((()=>{let t=1+~~(12*Math.random()),n=[];for(;n.length<t;){let e=1+~~(34*Math.random());n.includes(e)||n.push(e)}return n.map(t=>({fecha:new Date(e.FirstDate.valueOf()+864e5*t).format()})).reduce((function(t,n){return t[n.fecha]=[],t[n.fecha].push(i.build("div",{innerHTML:~~(1+6*Math.random()),className:"w3-badge w3-red w3-display-middle w3-large",id:"ctn_{fecha}".format(n),onclick:function(){e.ShowDayView(this.id.split("_")[1])}})),t}),{})})()),s(e,e.Date)}function s(e,t){e.ClearDayView(),e.ClearAgendaView();let o=n(5);e.LoadDayView((()=>{let t=-50;return[...Array(24).keys()].reduce((n,r,a)=>{if(100*Math.random()<80)return n;if(a>29)return n;let s={hora:a.toString(),dimension:i.apply({top:"{0}px".format(t+=60)},e.MeasureDayItem({start:60*a,end:60*a+360}))},l=i.build("div",o.format(s),!0);return n.push(l),n},[])})());let r=n(6);e.LoadAgendaView([...Array(24).keys()].reduce((e,t,n)=>{let o=i.build("div",r.format(n.toString()),!0);return e.push(o),e},[]))}return{root:{},init:function(){},render:function(){var e;return this.root=o.render(),r=i.build("div",V.a,"firstElementChild"),this.root.appendChild((e=r,f.addEventListeners(e,{}),e)),this.root},mounted:function(){e.publish("msg\\page_component\\update\\title","Agenda"),i.Include("./assets/js/schedule.js").then(()=>{t=Schedule({Element:r,View:"Month",OnMonthChanged:a,OnDayChanged:s}),o.addButton(t.Buttons.Day),o.addButton(t.Buttons.Agenda),o.addButton(t.Buttons.Month)})}}},D=n(3),R=n.n(D),B=function(e){let t=N(),n={};return{root:{},init:function(){},render:function(){var e;return this.root=t.render(),n=i.build("div",R.a,"firstElementChild"),this.root.appendChild((e=n,f.addEventListeners(e,{}),e)),this.root},mounted:function(){!function(){e.publish("msg\\page_component\\update\\title","Strava Auth");let t=e.router.current.queryValues;if(t.error)return e.publish(e.topics.NOTIFICATION,{message:t.error});if(!t.code)return e.publish(e.topics.NOTIFICATION,{message:"Parámetros insuficientes: code"});const o="https://www.strava.com/oauth/token?client_id=44665&client_secret=e872f05ea832f409ffe0e1ce042b074f691718d3&code="+t.code+"&grant_type=authorization_code";i.ajax.post(o,"",e=>{e.setRequestHeader("Accept","application/javascript")}).then(e=>JSON.parse(e)).then(t=>{localStorage.setItem("strava",JSON.stringify(t)),console.log(t),n.innerHTML="<h1>Autorización</h1>",setTimeout((function(){e.router.navigateTo("strava")}),3e3)}).catch(t=>{e.publish(e.topics.NOTIFICATION,{message:t.message})})}()}}},F=n(4),z=n.n(F),$=function(e){let t=N(),o={};return{root:{},init:function(){},render:function(){return this.root=t.render(),o=i.build("div",z.a,"firstElementChild"),this.root.appendChild(o),this.root},mounted:function(){!function(){if(e.publish("msg\\page_component\\update\\title","Strava"),JSON.parse(localStorage.getItem("strava")||"{}").token_type)return void function(){let t=JSON.parse(localStorage.getItem("strava")),r="{0}athlete/activities?access_token={1}".format("https://www.strava.com/api/v3/",t.access_token);i.ajax.get(r,e=>{e.setRequestHeader("Accept","application/javascript")}).then(e=>JSON.parse(e)).then(e=>{console.log(e);let t=n(7),r=i.build("div",t,!0).cloneNode(!0);o.appendChild(i.templates.fill(r,e))}).catch(t=>{e.publish(e.topics.NOTIFICATION,{message:t.message})})}();window.location="https://www.strava.com/oauth/authorize?client_id=44665&response_type=code&redirect_uri=https://github.com/rcastrogo/notas-app/strava/exchange_token&approval_prompt=force&scope=read,activity:read_all"}()}}};const W=s.TOPICS,G={root:i.$("appContent"),components:[],router:{routes:[],addRoute:function(e,t,n,o){return this.routes.push({name:e,path:t,controler:n,isView:o||!1}),this},getRoute:function(e){return this.routes.where((function(t){let n=t.path.exec(e);return n&&(t.params=n.map(e=>e)),t.queryValues=i.parseQueryString(),n}))[0]},navigateTo:function(e){this.current=this.getRoute(e);let t="{origin}{0}{1}".format(APP_PATH,e,location);window.history.pushState({},e,t),Y()},normalizePath:function(e){return e.replace(document.baseURI,"")},sync:function(){this.current=this.getRoute(this.normalizePath(window.location.href)),Y()},current:{}},topics:s.TOPICS,publish:s.publish,subcribe:s.subscribe};G.components=[{root:{},title:"Notas App",init:function(){},render:function(){let e={id:"appHeader",innerHTML:l.format(this),className:"w3-container w3-teal"};return this.root=i.build("header",e),this.root},mounted:function(){}},h(G),u(),{text:"© Rafael Castro Gómez, 2020",init:function(){},render:function(){let e={id:"appFooter",innerHTML:c.format(this),className:"w3-container w3-teal w3-center"};return i.build("footer",e)},mounted:function(){}}],G.router.addRoute("list",/list$/,w).addRoute("about",/about$/,y).addRoute("note",/note$/,E).addRoute("note",/note\/(\d{13})$/,E).addRoute("el-tiempo",/el-tiempo$/,S).addRoute("templates",/templates$/,I).addRoute("get-value",/templates\/get-value$/,L).addRoute("utils",/templates\/utils$/,T).addRoute("images",/images\/(\d+)$/,_,!0).addRoute("schedule",/schedule$/,P,!0).addRoute("strava-exchange-token",/strava\/exchange_token/,B,!0).addRoute("strava-main",/strava/,$,!0).addRoute("",/$/,b),G.components.forEach(e=>{e.init&&e.init(),G.root.appendChild(e.render()),e.mounted&&e.mounted()}),s.subscribe(W.VIEW_CHANGE,(e,t)=>{let n=G.components[0].root.style,o=G.components[1].root,i=G.components[2].root.style;t.isView?(o.classList.remove("sticky"),o.style.display="none",i.position="absolute",i.paddingBottom="0",i.left="0",i.right="0",i.bottom="52px",i.top="74px",i.overflow="auto",n.position="fixed",n.width="100%",n.zIndex="1000"):(o.style.display="",i.position="",i.paddingBottom="60px",i.overflow="",n.position="",n.width="",n.zIndex="")}),function(){let e=i.build("div",{id:"notificationPanel"});G.root.parentNode.insertBefore(e,G.root),s.subscribe(W.WINDOW_SCROLL,(t,n)=>{n.pageYOffset>=40?e.classList.add("sticky"):e.classList.remove("sticky")}),s.subscribe(W.NOTIFICATION,(function(t,n){let o='<div class="msg w3-container w3-border w3-round w3-animate-top">\n                        <span on-click="close" class="w3-button w3-large w3-display-right">x</span>\n                        <p style="overflow:hidden;margin-right:27px;">{message}</p>\n                      </div>',r=i.build("div",o.format(n)).firstElementChild;e.appendChild(r),f.addEventListeners(r,{close:t=>{r.classList.remove("w3-animate-top"),r.style.backgroundColor="gray",r.style.color="white",r.style.opacity="0",r.style.transform="translate(0, -200px)",setTimeout(()=>{r.parentNode&&e.removeChild(r)},500)}})}))}();const J=i.$("app-content-container");let U,Z;function Y(){let e=G.router.current.controler;Z&&U==e||(Z&&Z.dispose&&Z.dispose(),J.innerHTML="",Z=e(G),U=e,Z.init&&Z.init(),J.appendChild(Z.render()),Z.mounted&&Z.mounted(),s.publish(W.VIEW_CHANGE,G.router.current))}G.router.sync(),window.onpopstate=function(){G.router.sync()},window.addEventListener("load",()=>{if("serviceWorker"in navigator)try{navigator.serviceWorker.register("serviceWorker.js"),console.log("Service Worker Registered")}catch(e){console.log("Service Worker Registration Failed")}})}]);